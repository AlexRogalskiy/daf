apiVersion: v1
kind: Pod
metadata:
  name: storage-manager
  labels:
    name: storage-manager   
spec:
  containers:
  - name: storage-manager
    image: 10.103.136.239:5000/daf_storage_manager:1.0.0
    imagePullPolicy: Always
    lifecycle:
      postStart:
        exec:
          command: ["/bin/sh", "-c", "cat /etc/extra_hosts >> /etc/hosts"]
    ports:
    - name: client
      containerPort: 9000
    securityContext:
      privileged: true
      runAsUser: 0
    volumeMounts:
    - name: glusterfsvol 
      mountPath: /application/conf
      subPath: storage-manager/conf
      readOnly: true
    - name: glusterfsvol 
      mountPath: /etc/hadoop/conf
      subPath: etc/hadoop/conf
      readOnly: true
    - name: hosts
      mountPath: /etc/extra_hosts
    - name: krb5conf
      mountPath: /etc/krb5.conf
  securityContext:
    supplementalGroups: [1330600009]
  volumes:
  - name: glusterfsvol   
    persistentVolumeClaim:
      claimName: gluster-claim       
  - name: hosts 
    hostPath:
      path: /etc/hosts
  - name: krb5conf 
    hostPath:
      path: /etc/krb5.conf                